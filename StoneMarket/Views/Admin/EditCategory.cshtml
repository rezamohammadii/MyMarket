@model StoneMarket.AccessLayer.Entity.Category
@using StoneMarket.Core.Classes
@inject PanelLayoutScope scope
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = "~/Views/Shared/_Panel.cshtml";
    ViewData["Title"] = "ویرایش دسته بندی";


    var data = scope.Categories();
}

@{
    if (ViewBag.Ok)
    {
        <div class="alert alert-success" role="alert">
            اطلاعات با موفقیت ذخیره شد
        </div>
    }
}

<div class="row">
    <div class="col-xl-12 mb-30">
        <div class="card card-statistics h-100">
            <div class="card-body">
                <div class="d-block d-md-flex justify-content-between">
                    <div class="d-block">
                        <h5 class="card-title pb-0 border-0">اضافه کردن دسته بندی جدید</h5>
                    </div>

                </div>
                <form asp-action="EditCategory" enctype="multipart/form-data">
                    <div class="form-group" style="width:60%">
                        <label for="Name"> نام دسته بندی </label>

                        <input asp-for="Name" class="form-control" value="@Model.Name" />
                        <span asp-validation-for="Name" class="text-danger"></span>
                    </div>

                    <div class="form-group" style="width:60%">
                        <label for="Name"> عنوان صفحه </label>

                        <input asp-for="SeoTitle" class="form-control" value="@Model.SeoTitle" />
                        <span asp-validation-for="Name" class="text-danger"></span>
                    </div>


                    <div class="form-group">
                        <label for="SeoDescrption"> توضیحات صفحه (سئو دیسکریپشن)  </label>

                        <textarea asp-for="SeoDescrption" id="descw" class="form-control" style="width:60%;min-height:150px">@Model.SeoDescrption</textarea>
                        <span asp-validation-for="Name" class="text-danger"></span>
                    </div>



                    <div class="form-group">
                        <label for="Description">توضیحات کوتاه </label>

                        <script src="~/ckeditor/ckeditor.js"></script>
                        <textarea asp-for="Description" id="desc" class="form-control">@Model.Description</textarea>
                        <span asp-validation-for="Name" class="text-danger"></span>
                    </div>



                    <script type="text/javascript">
                        CKEDITOR.replace('desc');
                    </script>

                    <div class="form-group" style="width:60%">
                        <label class="mb-10" for="ParentCategory">انتخاب سر دسته </label>

                        <select asp-for="ParentId" class="fancyselect sm-mb-20 mr-20" style="width:100%">
                            <option value="none">سر دسته ندارد</option>
                            @foreach (var item in data)
                            {
                                <option value="@item.Id">@item.Name</option>

                            }

                        </select>
                    </div>

                    <div class="form-group">
                        <label class="mb-10" for="MoreDescription">توضیحات بیشتر </label>
                        <script src="~/ckeditor/ckeditor.js"></script>
                        <textarea asp-for="MoreDescription" id="desc2" class="form-control">@Model.MoreDescription</textarea>
                        <span asp-validation-for="MoreDescription" class="text-danger"></span>
                    </div>
                    <script type="text/javascript">
                        CKEDITOR.replace('desc2');
                    </script>


                    <div class="form-group" style="width:60%">
                        <label for="Picture"> تصویر دسته بندی </label>
                        <input asp-for="Picture" class="form-control-file" type="file" />
                        <img src="~/images/@Model.Picture" width:600px />
                        <span asp-validation-for="Picture" class="text-danger"></span>
                    </div>

                    <div class="form-group" style="width:100px">
                        <input type="submit" value="ثبت شود" class="btn btn-success btn-block" />
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>




@section Scripts {

<script>
     var list = [];
    $.ajax({
             url: "/Admin/Category",
             type: "GET",
             data:{}
         }).done(function(res){
             list.push(res)
             console.log(list)
             list.forEach(function(item){
             })
             //$('#mySelect').append($('<option>', {
             //    value: "none",
             //    text: 'My option'
             //}));
         })
</script>
}